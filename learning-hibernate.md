# Learning Hibernate (and jOOQ)

## My project experience with Hibernate

... Not working with the database; seeing far too many generated SQL queries ...
... Vietnam of Computer Science ...
... Disconnect with functional programming ...
... Bottom line: I did not understand Hibernate, and did not want to use it ...

## Working with the database rather than against it

... Working with Hibernate while studying the Hibernate documentation ...
... Learning the Hibernate is more than mainly the first level cache (note Hibernate's `StatelessSession`) ...
... In a way, JPQL is a beautiful SQL dialect ...
... Learning that associations should be lazily fetched (show explanatory links) ...
... And learning that entity graphs (or alternatives) should be used to choose fetching strategy per query ...
... In other words, working with the database (joining tables, in Java-friendly way) ...
... Learning about the [JPA/Hibernate tutorials by Thorben Janssen](https://thorben-janssen.com/tutorials/#popular) ...

## Using the metamodel

... Consider using the metamodel, for compile-time type-safe querying ...

## Combining the use of JPA entities with immutable Java record classes

... JPA entities are very poor DTOs; they should be internal to service layer implementations ...
... An application architecture that works well in my opinion, with service interfaces exchanging immutable records ...
... Things I learned in (for example) this project (such as pitfalls of method `getResultStream`)

## Learning jOOQ

... Sometimes JPA/Hibernate is not the best fit (when?) ...
... Moreover, SQL itself is much more expressive than I realized, e.g. regarding non-flat result set data ...
... This makes jOOQ very attractive, if not as JPA/Hibernate alternative, then at least as addition ...
... By all means, use jOOQ in a type-safe way, using its generated metamodel ...

## References

Some references:
+ [Jakarta Persistence 3.2](https://jakarta.ee/specifications/persistence/3.2/jakarta-persistence-spec-3.2)
+ [Short Guide to Hibernate](https://docs.jboss.org/hibernate/orm/7.1/introduction/html_single/Hibernate_Introduction.html)
  + [What to do when things go wrong](https://docs.jboss.org/hibernate/orm/7.1/introduction/html_single/Hibernate_Introduction.html#advice)
+ [Hibernate User Guide](https://docs.jboss.org/hibernate/orm/7.1/userguide/html_single/Hibernate_User_Guide.html)
+ [Thorben Janssen tutorials](https://thorben-janssen.com/tutorials/)
  + [Thorben Janssen popular tutorials](https://thorben-janssen.com/tutorials/#popular)
  + [10 common Hibernate mistakes that cripple your performance](https://thorben-janssen.com/common-hibernate-mistakes-cripple-performance/)
  + [5 common Hibernate mistakes that cause dozens of unexpected queries](https://thorben-janssen.com/5-common-hibernate-mistakes-that-cause-dozens-of-unexpected-queries/)
  + [LazyInitializationException What it is and the best way to fix it](https://thorben-janssen.com/lazyinitializationexception/)
  + [6 Hibernate mappings you should avoid for high-performance applications](https://thorben-janssen.com/6-hibernate-mappings-you-should-avoid-for-high-performance-applications/)
  + [Hibernate logging guide](https://thorben-janssen.com/hibernate-logging-guide/)
+ [Returning DTOs instead of entities in Spring Boot](https://igventurelli.io/what-is-a-dto-and-why-you-shouldnt-return-your-entities-in-spring-boot/)
